"use strict";function TitleBox(a,b,d){var c=this;this.panelId=b;this.mediator=d;this.currentId;this.currentRatio;this.gContainer=a.append("svg:g").attr("class","title_group visibleInPanic listener droptarget droptarget1");c.gContainer.append("svg:rect").attr("class","titleRect bordered").attr("filter","url(#dropshadow)").attr("width",c.titleBoxWidth).attr("height",global.panelTitleHeight).attr("rx",global.rectRounding).attr("x",global.legendOffsetX).attr("y",global.legendOffsetY);c.gContainer.append("svg:rect").attr("class","titleButton0 listener").attr("width",c.titleBoxWidth*c.titleSplitRatio).attr("height",global.panelTitleHeight).attr("rx",global.rectRounding).attr("x",global.legendOffsetX).attr("y",global.legendOffsetY).attr("opacity",0).on("click",function(){c.mediator.publish("changeValue",c.panelId,-1,undefined)});c.gContainer.append("svg:rect").attr("class","titleButton1 listener").attr("width",c.titleBoxWidth*(1-c.titleSplitRatio)).attr("height",global.panelTitleHeight).attr("rx",global.rectRounding).attr("x",global.legendOffsetX+c.titleBoxWidth*c.titleSplitRatio).attr("y",global.legendOffsetY).attr("opacity",0).on("click",function(){c.mediator.publish("changeValue",c.panelId,undefined,-1)})}TitleBox.prototype.titleBoxWidth=global.panelWidth-2*global.legendOffsetX;TitleBox.prototype.titleSplitRatio=0.6;TitleBox.prototype.update=function(c,m,g,e,i,f){var j=this;var b,a,l,k;if(c instanceof Array){b=c;a=m.join(" - ");l=(d3.min(g)===d3.max(g))?g[0]:g.join(" - ");k=(d3.min(e)===d3.max(e))?e[0]:e.join(" - ")}else{b=c;a=m;l=g;k=e}var n=(c instanceof Array||j.currentId instanceof Array)?f:f;if(j.currentId!==b||j.currentRatio!==i){j.currentId=b;j.currentRatio=i;j.gContainer.selectAll(".titleRect").transition().duration(n).style("fill",(b instanceof Array)?null:global.colorValue(b)).style("opacity",1);j.gContainer.selectAll(".titleText").transition().duration(f).style("opacity",0).remove();var d=j.gContainer.append("svg:text").attr("class",(b instanceof Array)?"titleText":"titleText titleText0").attr("x",global.legendOffsetX+j.titleBoxWidth*j.titleSplitRatio/2).attr("y",global.legendOffsetY+15).attr("dy",".35em").attr("dx","-.15em").text(a).transition().duration(f).style("opacity",1);var h=j.gContainer.append("svg:text").attr("class","titleText titleText1").attr("x",global.legendOffsetX+j.titleBoxWidth*(j.titleSplitRatio+1)/2).attr("y",global.legendOffsetY+15).attr("dy",".35em").attr("dx",".15em").text((i)?k:l).transition().duration(f).style("opacity",1);global.cleverCompress(d,j.gContainer.select(".titleRect"),j.titleSplitRatio-0.07,undefined);global.cleverCompress(h,j.gContainer.select(".titleRect"),0.93-j.titleSplitRatio,undefined)}};