"use strict";console.log("Az épp aktuális panelkonfiguráció kiíratása: global.getConfig();"),d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.formatPrefix(1e12).symbol="eMrd",d3.formatPrefix(1e9).symbol="Mrd",d3.formatPrefix(1e6).symbol="M",d3.formatPrefix(1e3).symbol="e";var global=function(){var a=function(){for(var a={},b=0,c=document.styleSheets.length;b<c;b++)for(var d=document.styleSheets[b],e=0,f=d.cssRules.length;e<f;e++){var g=d.cssRules[e].cssText;if("#less"===g.substr(0,5)){var h=g.match(/\.(\w+)/),i=g.match(/: .*;/)[0].replace(": ","").replace(";","");h&&i&&(void 0===a[h[1]]?a[h[1]]=i:Array.isArray(a[h[1]])?a[h[1]].push(i):a[h[1]]=[])}}return a}(),b=function(a){var b=$(a)[0].getBoundingClientRect(),c=(b.left+b.right)/2,d=(b.top+b.bottom)/2;return c>=0&&d>=0&&d<=(window.innerHeight||document.documentElement.clientHeight)&&c<=(window.innerWidth||document.documentElement.clientWidth)},c=function(a,b,c,d,e,f){if(c=c||1.7,b<10)a.text("");else{var g=a[0][0].getBBox().width;if(g>b*c){var h=a.text().trim(),i=Math.round(h.length*(b/g)*(1+.28*(c-1))-1),j=Math.round(h.length*(b/g)*c-1),k=h.substring(i,j),l=Math.max(k.lastIndexOf("-"),k.lastIndexOf(" "),k.lastIndexOf("/")),m=Math.round(l>-1?i+l:(i+j)/2),n=h.substring(0,m)+"..";a.text(n),g=a[0][0].getBBox().width}var o=1;if(g>b&&(o=b/g,g=b),1!==o||e){var p=a.attr("x")*(1-o);e&&(p+=(f-g)/2);var q=((a.attr("transform")||"")+" ").replace(/matrix.*/g,"");a.attr("transform",q+"matrix("+o+",0,0,1,"+p+",0)")}}},d=function(a,b){return a+" "+b+" "},e=function(a){for(var b=5381,c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);b=(b<<5)+b+e}return Math.abs(b)},f=function(){global.mediators[0].publish("getConfig"),global.mediators[1].publish("getConfig")},g=function(){var a={};a.p=[];var b=2,c=function(c){if(a.p.push(c),b-=1,0===b){var d=d3.selectAll(".container.activeSide")[0].length;1===d&&(d=d3.selectAll("#container1.activeSide")[0].length),a.d=d}};global.mediators[0].publish("getConfig",c),global.mediators[1].publish("getConfig",c)},h=function(a,b,c){var d=d3.select("#progressDiv"),e=setTimeout(function(){d.style("z-index",1e3)},50);$.ajax({url:global.url.auth,beforeSend:function(c){c.setRequestHeader("Authorization","Basic "+btoa(a+":"+b))},success:function(b){global.secretUsername=a,global.secretToken=b,L(),c()},error:function(d,e,f){$(":focus").blur(),401===d.status?L("Hibás felhasználónév, vagy jelszó.","<div class='errorStaticText'>Felhasználónév:</div><div><input id='loginName' type='text' name='username'></div><div class='errorStaticText'>Jelszó:</div><div><input id='loginPassword' type='password' name='password'></div>","Belépés",function(){h($("#loginName").val(),$("#loginPassword").val(),c)},"Kilépés",function(){location.reload()}):403===d.status?L("Hozzáférés megtagadva","<div class='errorStaticText'>Nincs hozzáférési jogod a rendszerhez. A hibaüzenet:</div><div class='errorVariableText'><em>Error "+d.status+": "+f+"</em></div><div class='errorStaticText'>Hozzáférési jogot az ÁEEK üzemeltetéstől kérhetsz.</div>",void 0,void 0,"Kilépés",function(){location.reload()}):L("Hálózati hiba","<div class='errorStaticText'>A kapcsolat az adatbázis felé megszakadt. A hibaüzenet:</div><div class='errorVariableText'><em>Error "+d.status+": "+f+"</em></div><div class='errorStaticText'>Próbálj meg újra belépni!</div>","Újra",function(){h(a,b,c)},"Kilépés",function(){location.reload()})},complete:function(){clearTimeout(e),d.style("z-index",-1)}})},i=function(a,b,c,d){var e=d3.select("#progressDiv"),f=setTimeout(function(){e.style("z-index",1e3)},200);$.ajax({url:a,data:b,beforeSend:function(a){a.setRequestHeader("Authorization","Basic "+btoa(global.secretUsername+":"+global.secretToken))},success:function(a,b){(void 0===d||d)&&L(),c(a,b)},error:function(g,j,k){$(":focus").blur(),clearTimeout(f),e.style("z-index",-1),401===g.status?L("TITKOS! Jelentkezz be!","<div class='errorStaticText'>Felhasználónév:</div><div><input id='loginName' type='text' name='username'></div><div class='errorStaticText'>Jelszó:</div><div><input id='loginPassword' type='password' name='password'></div>","Belépés",function(){h($("#loginName").val(),$("#loginPassword").val(),function(){i(a,b,c,d)})},"Kilépés",function(){location.reload()}):403===g.status?L("Hozzáférés megtagadva","<div class='errorStaticText'>A kért adatokhoz nincs hozzáférési jogod. A hibaüzenet:</div><div class='errorVariableText'><em>Error "+g.status+": "+k+"</em></div><div class='errorStaticText'>Hozzáférési jogot az ÁEEK üzemeltetéstől kérhetsz.</div>",void 0,void 0,"Kilépés",function(){location.reload()}):(""===k&&(k="Server unreachable"),L("Hálózati hiba","<div class='errorStaticText'>A kapcsolat az adatbázis felé megszakadt. A hibaüzenet:</div><div class='errorVariableText'><em>Error "+g.status+": "+k+"</em></div><div class='errorStaticText'>Próbáld meg az adatokat újra letölteni!</div>","Újra",function(){i(a,b,c)},"Kilépés",function(){location.reload()}))},complete:function(){clearTimeout(f),e.style("z-index",-1)}})},j=function(a,c){var d=1,e=0;return(0===d||a===c||1===d&&b(c))&&(e=global.selfDuration),e},k=function(a,b,d,e,f,g,h){var i;i="number"==typeof b?d*b:d*(f?b[0][0].getBBox().height:b[0][0].getBBox().width),a.each(function(){c(d3.select(this),i,e,f,g,h)})},l=function(a,b,c,e,f,g,h,i){var j="M"+d(a+f,b);return j+="L"+d(a+c-g,b)+"Q"+d(a+c,b)+d(a+c,b+g),j+="L"+d(a+c,b+e-h)+"Q"+d(a+c,b+e)+d(a+c-h,b+e),j+="L"+d(a+i,b+e)+"Q"+d(a,b+e)+d(a,b+e-i),j+="L"+d(a,b+f)+"Q"+d(a,b)+d(a+f,b),j+="Z"},m=function(a){return void 0!==a?(parseFloat(d3.format(".3s")(a))+d3.formatPrefix(a).symbol).replace(".",","):"???"},n=function(a){return void 0!==a?(parseFloat(d3.format(".4s")(a))+d3.formatPrefix(a).symbol).replace(".",","):"???"},o=function(a){return isNaN(a)?O:P[a%20]},p=function(a){return P[(e(a)+4)%20]},q=function(a){var b=this;this.tooltip=new Tooltip,i(global.url.superMeta,"",function(c,d){b.superMeta=c.reports,a()})},r=function(a){var b=function(){};return b.prototype=a.prototype,new b},s=function(a,b,c){var d=global.positionInArrayByProperty(a,b,c);return d===-1?void 0:a[d]},t=function(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)if(a[e][b]===c){d=e;break}return d},u=function(a,b){for(var c=-1,d=0,e=a.length;d<e;d++)if(a[d]===b){c=d;break}return c},v=function(a,b,c){return{"-webkit-transform":"scale("+a+")","-moz-transform":"scale("+a+")","-ms-transform":"scale("+a+")","-o-transform":"scale("+a+")",transform:"scale("+a+")","-webkit-transform-origin":b+" "+c,"-moz-transform-origin":b+" "+c,"-ms-transform-origin":b+" "+c,"-o-transform-origin":b+" "+c,"transform-origin":b+" "+c}},w=function(a,b,c){return a<c&&a>=b},x=function(a,b,c){var d=d3.lab(a),e=b?d3.lab(b):d3.lab(M),f=c?d3.lab(c):d3.lab(N),g=Math.pow(d.l-e.l,2)+Math.pow(d.a-e.a,2)+Math.pow(d.b-e.b,2),h=Math.pow(d.l-f.l,2)+Math.pow(d.a-f.a,2)+Math.pow(d.b-f.b,2);return g>h?e.rgb():f.rgb()},y=function(a,b){for(var c=Object.keys(a),d=[],e=0;e<c.length;e++)"undefined"!=typeof b&&c[e]in b?d[c[e]]=b[c[e]]:d[c[e]]=a[c[e]];return d},z=function(a,b){var c=[["panel_pie","PP"],["panel_bar2d","PB2"],["panel_barline","PB"],["panel_horizontalbar","PH"],["panel_map","PM"],["panel_table1d","PT1"],["panel_table2d","PT2"],["group:","A:"],["position:","B:"],["dim:","C:"],["dimx:","D:"],["dimy:","E:"],["dimr:","F:"],["dimc:","G:"],["val:","H:"],["valbars:","I:"],["vallines:","J:"],["valavglines:","K:"],["valpos:","L:"],["valneg:","M:"],["multiplier:","N:"],["ratio:","O:"],["streched:","P:"],["centered:","Q:"],["domain:","R:"],["domainr:","S:"],["symbols:","T:"],["top10:","U:"],["range:","V:"],["poi:","W:"],["false","Ff"],["true","Tt"],["undefined","Uu"]];a=a.replace(/ /g,"");for(var d=b?1:0,e=b?0:1,f=0,g=c.length;f<g;f++)a=a.replace(new RegExp(c[f][d],"g"),c[f][e]);return a},A=function(a){var b=40*Math.sin(Math.pow(Math.min(a,80),.92)/40);return Math.min(b,32)},B=function(a){return isFinite(a)?a:0},C=function(a){return null===a?null:"div"===a.nodeName.toLowerCase()&&"panel"===a.id.substring(0,5)?a.id:C(a.parentNode)},D=function(a){if(void 0===a)document.getElementById("helpMask").style.opacity=0,setTimeout(function(){document.getElementById("helpMask").style.display="none"},100);else if(null===a)document.getElementById("helpMask").style.display="block",d3.selectAll("#helpContent div[id]").style("display","none"),d3.selectAll("#helpContent #helpStart").style("display",null),d3.selectAll("#helpControl span").classed("activeHelp",!1),d3.selectAll("#helpControl .startItem").classed("activeHelp",!0),setTimeout(function(){document.getElementById("helpMask").style.opacity=1},5);else{var b=d3.select(a),c=b.attr("data-link");d3.selectAll("#helpControl .activeHelp").classed("activeHelp",!1),b.classed("activeHelp",!0),d3.selectAll("#helpContent div[id]").style("display","none"),d3.selectAll("#helpContent #"+c).style("display",null)}},E=function(a){global.mediators[0].publish("magnify",a)},F=function(){d3.select("#progressDiv").style("z-index",-1),global.mediators[0].publish("killside",0),global.mediators[1].publish("killside",1),global.getConfig2()},G=function(){global.mediators[0].publish("changepanels"),global.getConfig2()},H=function(a){global.mediators[0].publish("addPanel",a),global.mediators[1].publish("addPanel",a)},I=function(a){a.stopPropagation(),d3.selectAll("svg > *").style("pointer-events","none"),d3.select("body").style("cursor","crosshair"),d3.select("body").on("click",function(){var a=d3.event;a.stopPropagation(),d3.select("body").style("cursor","default"),d3.select("body").on("click",null),d3.selectAll("svg > *").style("pointer-events",null);var b="#"+global.getContainerPanelId(d3.event.target);global.mediators[0].publish("killPanel",b),global.mediators[1].publish("killPanel",b),global.getConfig2()})},J=function(){global.mediators[0].publish("save"),global.mediators[1].publish("save")},K=function(){var a=d3.selectAll(".container.activeSide")[0].length;if(d3.selectAll("#mainToolbar .onlyforreport").classed("inactive",2===a),1===a){var b=d3.selectAll("#container1.activeSide")[0].length,c=d3.selectAll("#container"+b+" .HeadPanel_Browser").empty(),d=d3.selectAll("#container"+b+" .panel")[0].length;if(1===d&&d3.selectAll("#mainToolbar .panelKiller").classed("inactive",!0),(d>global.maxPanelCount||!c)&&d3.selectAll("#mainToolbar .newpanel").classed("inactive",!0),c||(d3.selectAll("#mainToolbar .save").classed("inactive",!0),d3.selectAll("#mainToolbar .save, #mainToolbar #mainCloseButton").classed("inactive",!0)),global.facts[b]){for(var e=!1,f=0,g=global.facts[b].reportMeta.dimensions.length;f<g;f++)if(1===global.facts[b].reportMeta.dimensions[f].is_territorial){e=!0;break}d3.selectAll("#mainToolbar .mappanelcreator").classed("inactive",!e)}}d3.selectAll("#mainToolbar #mainPlusButton").classed("inactive",global.panelNumberOnScreen<=1),d3.selectAll("#mainToolbar #mainMinusButton").classed("inactive",global.panelNumberOnScreen>=global.maxPanelCount)},L=function(a,b,c,d,e,f){var g=d3.select("#dialogMask"),h=g.select("#dialogFirstButton"),i=g.select("#dialogSecondButton");void 0===a?"none"!==g.style("display")&&(g.style("opacity",0),setTimeout(function(){g.style("display","none")},200)):(g.select("h1").html(a),g.select("#dialogMessage").html(b),void 0===c?(h.classed("hidden",!0),h[0][0].onclick=void 0):(h.html(c),h[0][0].onclick=d,h.classed("hidden",!1)),void 0===e?(i.classed("hidden",!0),i[0][0].onclick=void 0):(i.html(e),i[0][0].onclick=f,i.classed("hidden",!1)),i[0][0].focus(),i[0][0].blur(),g.style("display","block"),setTimeout(function(){g.style("opacity",1)},50))},M=a.writeOnDimColor,N=a.writeOnValColor,O="grey",P=["#40bddf","#bad642","#8c8014","#22ada6","#85c222","#faeb4c","#00a6d3","#9eb060","#43b57c","#d4cc4c","#3db8a3","#80d4e9","#9ccf61","#bfe8f6","#f7e306","#b8bf5a","#badb8e","#c2b211","#7d9c53","#0885a4","#fcf288","#7dc772"],Q=parseInt(a.elementBorderSize),R=parseInt(a.rounding),S=parseInt(a.panelWidth),T=parseInt(a.panelMargin),U=parseInt(a.panelHeight),V=a.panelBackgroundColor,W=a.axisTextOpacity,X=parseInt(a.fontSizeSmall),Y=parseInt(a.mainToolbarHeight),Z={draggedSide:null,draggedType:null,draggedId:null,targetObject:null,targetPanelId:null,targetSide:null,targetId:null,draggedMatchesTarget:function(){return this.draggedSide===this.targetSide}},_=document.createElement("div");_.style.visibility="hidden",_.style.width="100px",_.style.msOverflowStyle="scrollbar",document.body.appendChild(_);var aa=_.offsetWidth;_.style.overflow="scroll";var ba=document.createElement("div");ba.style.width="100%",_.appendChild(ba);var ca=ba.offsetWidth;_.parentNode.removeChild(_);var da=aa-ca;return{facts:[],maxPanelCount:6,panelNumberOnScreen:void 0,mediators:[],baseLevels:[[],[]],superMeta:void 0,scrollbarWidth:da,mapBorder:Q,fontSizeSmall:X,panelBackgroundColor:V,panelWidth:S,panelHeight:U,panelMargin:T,mainToolbarHeight:Y,selfDuration:800,legendOffsetX:20,legendOffsetY:15,panelTitleHeight:30,numberOffset:35,legendHeight:20,rectRounding:R,scaleRatio:void 0,colorNA:O,axisTextOpacity:W,dragDropManager:Z,tooltip:void 0,secretToken:"zzz",secretUsername:void 0,maxEntriesIn1D:150,maxEntriesIn2D:1e3,axisTextSize:A,getFromArrayByProperty:s,positionInArrayByProperty:t,positionInArray:u,valueInRange:w,initGlobals:q,readableColor:x,combineObjects:y,getContainerPanelId:C,mainToolbar_help:D,mainToolbar_magnify:E,mainToolbar_closeSide:F,mainToolbar_switchSide:G,mainToolbar_createNewPanel:H,mainToolbar_killCursor:I,mainToolbar_save:J,mainToolbar_refreshState:K,getConfig:f,getConfig2:g,minifyInits:z,setDialog:L,get:i,subclassOf:r,getStyleForScale:v,orZero:B,getAnimDuration:j,cleverRound3:m,cleverRound5:n,cleverCompress:k,rectanglePath:l,colorValue:o,color:p}}();