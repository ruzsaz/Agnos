"use strict";function Tooltip(){var a=this;this.screenSizeX=parseInt($(window).width());this.screenSizeY=parseInt($(window).height());this.status=-2;this.element=undefined;this.currentWidth=0;this.currentHeight=0;this.tooltip=d3.select("body").append("html:div").attr("class","tooltip").style("opacity",0);d3.select("body").on("mousemove",function(){var e=d3.event;var c=$($(e.target).closest("[tooltip]")[0]).attr("tooltip");if(c!==undefined){a.element=undefined;a.show(c)}else{var h=d3.select(e.target).data()[0];if((h&&h.tooltip)){if(h!==a.element){a.show(h.tooltip);a.element=h}else{a.show()}}else{if(a.status>0){a.hide()}}}if(a.status!==-2){var g=e.pageX;var f=e.pageY;var b=(g*2>a.screenSizeX)?g-a.tooltipOffsetX-a.currentWidth-6:g+a.tooltipOffsetX;var d=(f*2>a.screenSizeY)?f-a.tooltipOffsetY-a.currentHeight:f+a.tooltipOffsetY;a.tooltip.style("left",b+"px").style("top",d+"px")}})}Tooltip.prototype.tooltipOffsetX=16;Tooltip.prototype.tooltipOffsetY=18;Tooltip.prototype.tooltipOpacity=0.9;Tooltip.prototype.appearDelay=1000;Tooltip.prototype.kill=function(){this.status=-2;this.tooltip.transition().duration(0).style("opacity",0)};Tooltip.prototype.hide=function(){var a=this;a.status=-1;a.tooltip.transition().duration(global.selfDuration/2).style("opacity",0).each("end",function(){a.status=-2})};Tooltip.prototype.show=function(a){var b=this;b.screenSizeX=parseInt($(window).width());b.screenSizeY=parseInt($(window).height());if(b.status<0){b.tooltip.transition().duration(0);b.tooltip.transition().delay((b.status===-1)?0:b.appearDelay).duration(global.selfDuration/2).style("opacity",b.tooltipOpacity).each("end",function(){b.status=2});b.status=1}if(a!==undefined){b.tooltip.html(a);b.currentWidth=parseInt(b.tooltip.style("width"));b.currentHeight=parseInt(b.tooltip.style("height"))}};